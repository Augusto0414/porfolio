---
import HeaderAside from "./HeaderAside.astro";
import "../styles/global.css";
import Experience from "./Experience.astro";
import Tecnologies from "./Tecnologies.astro";
import Projects from "./Projects.astro";
import SpotifySection from "./SpotifySection.astro";
---

<!-- Bento Grid Portfolio Layout -->
<div class="min-h-screen w-full bg-[#0a0a0a] relative overflow-hidden">
  <!-- Gradient Orbs Background -->
  <div class="fixed inset-0 overflow-hidden pointer-events-none">
    <div class="absolute top-0 -left-40 w-96 h-96 bg-blue-500/5 rounded-full blur-3xl"></div>
    <div class="absolute top-1/3 -right-40 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"></div>
    <div id="mouseGradient" class="absolute w-96 h-96 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 rounded-full blur-3xl opacity-0 transition-opacity duration-500"></div>
  </div>

  <!-- Content -->
  <div class="relative z-10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12">
      
      <!-- Bento Grid Container -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 auto-rows-auto">
        
        <!-- Hero Card - Ocupa 2 columnas -->
        <div class="md:col-span-2 lg:col-span-2 bento-card fade-in">
          <HeaderAside />
        </div>

        <!-- Spotify Card - Verde -->
        <div class="lg:col-span-1 bento-card bg-gradient-to-br from-green-600/20 to-green-800/20 border-green-500/30 scroll-reveal">
          <SpotifySection />
        </div>

        <!-- Experience Card - Ocupa toda la fila -->
        <div class="md:col-span-2 lg:col-span-3 bento-card scroll-reveal">
          <Experience />
        </div>

        <!-- Technologies Card - Ocupa toda la fila -->
        <div class="md:col-span-2 lg:col-span-3 bento-card scroll-reveal">
          <Tecnologies />
        </div>

        <!-- Projects Card - Ocupa toda la fila -->
        <div class="md:col-span-2 lg:col-span-3 bento-card scroll-reveal">
          <Projects />
        </div>

      </div>

      <!-- Footer -->
      <footer class="mt-12 text-center">
        <p class="text-sm text-gray-600">Â© 2025 Augusto R. Todos los derechos reservados.</p>
      </footer>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const mouseGradient = document.getElementById('mouseGradient');
    let mouseX = 0;
    let mouseY = 0;
    let currentX = 0;
    let currentY = 0;

    document.addEventListener('mousemove', (e) => {
      mouseX = e.clientX;
      mouseY = e.clientY;
      
      if (mouseGradient) {
        mouseGradient.style.opacity = '1';
      }
    });

    document.addEventListener('mouseleave', () => {
      if (mouseGradient) {
        mouseGradient.style.opacity = '0';
      }
    });

    function animate() {
      const dx = mouseX - currentX;
      const dy = mouseY - currentY;
      
      currentX += dx * 0.1; 
      currentY += dy * 0.1;

      if (mouseGradient) {
        mouseGradient.style.left = `${currentX - 192}px`;
        mouseGradient.style.top = `${currentY - 192}px`;
      }

      requestAnimationFrame(animate);
    }

    animate();

    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -100px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('revealed');
        }
      });
    }, observerOptions);

    document.querySelectorAll('.scroll-reveal').forEach(el => {
      observer.observe(el);
    });

    setTimeout(() => {
      document.querySelectorAll('.fade-in').forEach(el => {
        el.classList.add('visible');
      });
    }, 100);
  });
</script>
